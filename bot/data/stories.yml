version: "2.0"

stories:

- story: Greet user
  steps:
  - intent: start
  - action: utter_start

- story: User don't want to participate sad path
  steps:
  - intent: start
  - action: utter_start
  - intent: disagree
  - action: utter_finish

- story: User wants to participate
  steps:
  - intent: start
  - action: utter_start
  - intent: agree
  - action: utter_agreed_participation
  - action: utter_ask_email

- story: Activate vote form with user email
  steps:
  - intent: agree
  - action: utter_agreed_participation
  - action: utter_ask_email
  - intent: email
    entities:
    - email
  - action: action_setup_conversation
  - action: vote_form
  - active_loop: vote_form
  - active_loop: null
  - action: utter_finish


- story: Activate vote form without user email
  steps:
  - intent: agree
  - action: utter_agreed_participation
  - action: utter_ask_email
  - intent: disagree
  - action: action_setup_conversation
  - action: vote_form
  - active_loop: vote_form
  - active_loop: null
  - action: utter_finish

- story: User provides invalid email
  steps:
  - intent: agree
  - action: utter_agreed_participation
  - action: utter_ask_email
  - intent: invalid_email
  - action: utter_invalid_email
  - intent: email
    entities:
    - email
  - action: action_setup_conversation
  - action: vote_form
  - active_loop: vote_form
  - active_loop: null
  - action: utter_finish
  
