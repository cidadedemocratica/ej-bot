#### This file contains tests to evaluate that your bot behaves as expected.
#### If you want to learn more, please see the docs: https://rasa.com/docs/rasa/testing-your-assistant

stories:
- story: Greet user
  steps:
  - user: |
      oi
    intent: start
  - action: action_get_conversation_title
  - action: utter_start
  - action: utter_ask_user_particpate

- story: User utters out of context 
  steps:
  - user: |
      asdfgasd
    intent: out_of_context
  - action: utter_out_of_context

- story: User don't want to participate sad path
  steps:
  - user: |
      olá
    intent: start
  - action: action_get_conversation_title
  - action: utter_start
  - action: utter_ask_user_particpate
  - user: |
      não
    intent: disagree
  - action: utter_disagreed_participation
  - action: utter_stopped
  - action: utter_next_conversation
  - action: utter_finish
  - action: action_restart

- story: User agree to use email
  steps:
  - user: |
      oi
    intent: start
  - action: action_get_conversation_title
  - action: utter_start
  - action: utter_ask_user_particpate
  - user: |
      sim
    intent: agree
  - action: utter_agreed_participation
  - action: utter_ask_email
  - action: utter_explain_ask_email
  - action: utter_email_is_optional
  - user: |
      meu email: [email@user.com](email)
    intent: email
  - slot_was_set:
    - email: email@user.com
  - action: action_setup_conversation
  - action: vote_form
  - active_loop: vote_form

- story: User want to participate without email
  steps:
  - user: |
      oi
    intent: start
  - action: utter_start
  - action: utter_ask_user_particpate
  - user: |
      sim
    intent: agree
  - action: utter_agreed_participation
  - action: utter_ask_email
  - action: utter_explain_ask_email
  - action: utter_email_is_optional
  - user: |
      não
    intent: disagree
  - action: action_setup_conversation
  - action: vote_form
  - active_loop: vote_form

- story: User provide invalid email
  steps:
  - user: |
      olá
    intent: start
  - action: utter_start
  - action: utter_ask_user_particpate
  - user: |
      sim
    intent: agree
  - action: utter_agreed_participation
  - action: utter_ask_email
  - user: |
      @mario
    intent: invalid_email
  - action: utter_invalid_email
  - action: utter_ask_email_again

- story: Welcome user
  steps:
  - user: |
      novo usuario conectado
    intent: welcome
  - action: utter_welcome